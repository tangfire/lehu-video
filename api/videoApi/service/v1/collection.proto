syntax = "proto3";

package api.videoApi.service.v1;

option go_package = "lehu-video/api/videoApi/service/v1;v1";
option java_multiple_files = true;
option java_package = "api.videoApi.service.v1";
import "google/api/annotations.proto";
import "api/videoApi/service/v1/base.proto";
import "api/videoApi/service/v1/video.proto";

message Collection {
	// @gotags: json:"id,omitempty,string"
	int64 id = 1; // 收藏夹id
	// @gotags: json:"userId,omitempty,string"
	int64 user_id = 2; // 用户id
	string name = 3; // 收藏夹名称
	string description = 4; // 收藏夹描述
}


service CollectionService {
	// 创建收藏夹
	rpc CreateCollection(CreateCollectionReq) returns (CreateCollectionResp) {
		option (google.api.http) = {
			post: "/v1/collection"
			body: "*"
		};
	};

	// 删除收藏夹
	rpc RemoveCollection(RemoveCollectionReq) returns (RemoveCollectionResp) {
		option (google.api.http) = {
			delete: "/v1/collection/{id}"
		};
	};

	// 列出用户的收藏夹
	rpc ListCollection(ListCollectionReq) returns (ListCollectionResp) {
		option (google.api.http) = {
			get: "/v1/collection"
		};
	};

	// 更新收藏夹信息
	rpc UpdateCollection(UpdateCollectionReq) returns (UpdateCollectionResp) {
		option (google.api.http) = {
			put: "/v1/collection"
			body: "*"
		};
	};

	// 将视频添加到收藏夹
	rpc AddVideo2Collection(AddVideo2CollectionReq) returns (AddVideo2CollectionResp) {
		option (google.api.http) = {
			post: "/v1/collection/video"
			body: "*"
		};
	};

	// 从收藏夹中移除视频
	rpc RemoveVideoFromCollection(RemoveVideoFromCollectionReq) returns (RemoveVideoFromCollectionResp) {
		option (google.api.http) = {
			delete: "/v1/collection/{collection_id}/video/{video_id}"
		};
	};

	// 列出收藏夹中的视频
	rpc ListVideo4Collection(ListVideo4CollectionReq) returns (ListVideo4CollectionResp) {
		option (google.api.http) = {
			get: "/v1/collection/video"
		};
	};
}

message CreateCollectionReq {
	string name = 1; // 收藏夹名称
	string description = 2; // 收藏夹描述
}

message CreateCollectionResp {
	Collection collection = 1;
}

message RemoveCollectionReq {
	// @gotags: json:"id,omitempty,string"
	int64 id = 1; // 收藏夹id
}

message RemoveCollectionResp {}

message ListCollectionReq {
	PageStatsReq page_stats = 1;
}

message ListCollectionResp {
	repeated Collection collections = 1;
	PageStatsResp page_stats = 2;
}

message UpdateCollectionReq {
	// @gotags: json:"id,omitempty,string"
	int64 id = 1; // 收藏夹id
	string name = 2; // 收藏夹名称
	string description = 3; // 收藏夹描述
}

message UpdateCollectionResp {
	Collection collection = 1;
}

message AddVideo2CollectionReq {
	// @gotags: json:"collectionId,omitempty,string"
	int64 collection_id = 1; // 收藏夹id，不传则添加到默认收藏夹
	// @gotags: json:"videoId,omitempty,string"
	int64 video_id = 2; // 视频id
}

message AddVideo2CollectionResp {}

message RemoveVideoFromCollectionReq {
	// @gotags: json:"collectionId,omitempty,string"
	int64 collection_id = 1; // 收藏夹id
	// @gotags: json:"videoId,omitempty,string"
	int64 video_id = 2; // 视频id
}

message RemoveVideoFromCollectionResp {}

message ListVideo4CollectionReq {
	// @gotags: json:"collectionId,omitempty,string"
	int64 collection_id = 1; // 收藏夹id
	PageStatsReq page_stats = 2;
}

message ListVideo4CollectionResp {
	repeated Video videos = 1;
	PageStatsResp page_stats = 2;
}